"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2710],{52710:function(a,b,c){c.r(b),c.d(b,{DownloadFiles:function(){return aL},EditDOCX:function(){return bc},EditInput:function(){return aS},Process:function(){return aY},SelectFiles:function(){return aZ.Z},ViewFiles:function(){return bb},ViewPDFAAnalysis:function(){return be}});var d,e=c(23842),f=c(3204),g=c(35230),h=c.n(g),i=c(24246),j=c(34896),k=c(13018),l=c(87407),m=c(27378),n=c(86595),o=c(87677),p=c(60027),q=c(27391),r=c(13946),s=c(52298),t=c(53357),u=c(85034),v=c(31373),w=c(29549);function x(a){var b=a.place,c=(0,v.Z)(a,["place"]);return(0,i.jsx)(w.zx,(0,u.Z)({borderTopLeftRadius:"top"===b||"top-left"===b?{base:0,md:"lg"}:0,borderTopRightRadius:"top"===b||"top-right"===b?{base:0,md:"lg"}:0,borderBottomLeftRadius:"bottom"===b||"bottom-left"===b?{base:0,md:"lg"}:0,borderBottomRightRadius:"bottom"===b||"bottom-right"===b?{base:0,md:"lg"}:0},c))}var y=c(70169),z=c(83125),A=c(62634),B=c(34991),C=c(68147),D=c(52050),E=c(77751),F=c(9992),G=c(87228),H=c(15858),I=c(82356),J=c(79141),K=c(87144),L=c(65372),M=c(5003),N=c(6755),O=(0,m.forwardRef)(function(a,b){var c=a.onClick,d=a.onKeyPress,e=a.disabled,f=a.noFocusStyle,g=a.usePointer,h=a.children,k=a.tabIndex,l=(0,v.Z)(a,["onClick","onKeyPress","disabled","noFocusStyle","usePointer","children","tabIndex"]),n=(0,m.useRef)(null);(0,m.useImperativeHandle)(b,function(){return n.current});var o,p,q=function(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:{},c=!!b.stopPropagation,d=!!b.preventDefault,e=!!b.blurOnClick,f=!!b.disabled;return(0,m.useCallback)(function(b){if(d&&b.preventDefault(),c&&b.stopPropagation(),!f){if(e){var g=document.activeElement;null==g||g.blur()}null==a||a(b)}},[d,c,e,a,f])}(c,{disabled:e,stopPropagation:!0}),r=(o=d,p=n,(0,m.useCallback)(function(a){if(" "===a.key||"Enter"===a.key){var b=(0,N.EZ)(a);p&&a.target===p.current?(p.current.dispatchEvent(b)," "===a.key&&a.preventDefault()):p||a.target.dispatchEvent(b)}null==o||o(a)},[p,o]));return(0,i.jsx)(j.xu,(0,y.Z)((0,u.Z)({tabIndex:e?-1:null!=k?k:0,onClick:q,onKeyPress:r,ref:n,display:"inline-block",outline:"none",transition:M.f5,cursor:g?"pointer":void 0,_focusVisible:f||e?void 0:{boxShadow:"outline"}},l),{role:"button",children:h}))}),P=c(60042),Q=c.n(P),R=c(92208),S=(0,m.forwardRef)(function(a,b){var c,d=a.src,f=a.pending,g=a.onRenderLoading,j=a.onRenderFallback,k=a.alt,l=a.className,n=(0,v.Z)(a,["src","pending","onRenderLoading","onRenderFallback","alt","className"]),o="string"==typeof d||!d,p=(0,m.useState)(!o),q=p[0],r=p[1],s=(0,m.useState)(o?d:void 0),t=s[0],w=s[1],x=(0,m.useCallback)((c=(0,e.Z)(h().mark(function a(b){var c;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r(!0),c=void 0,a.prev=2,a.next=5,(0,R.h)(b,null);case 5:c=a.sent,a.next=10;break;case 8:a.prev=8,a.t0=a.catch(2);case 10:r(!1),w(c||void 0);case 12:case"end":return a.stop()}},a,null,[[2,8]])})),function(a){return c.apply(this,arguments)}),[]);(0,m.useEffect)(function(){if(o){r(!1),w(d||void 0);return}x(d)},[x,o,d]);var z=Q()("ui__image",l);return q||f?(0,i.jsx)(i.Fragment,{children:null==g?void 0:g()}):t?(0,i.jsx)("img",(0,y.Z)((0,u.Z)({},n),{alt:k,src:t,className:z,ref:b})):(0,i.jsx)(i.Fragment,{children:null==j?void 0:j()})}),T=c(24364),U=c(21151),V=new(function(){function a(){var b=this;(0,T.Z)(this,a),this._handleFirstTab=function(a){"Tab"===a.key&&(b._setIsUserTabbing(!0),b._tabToMouseListener())},this._handleFirstMouse=function(){b._setIsUserTabbing(!1),b._mouseToTabListener()},this._subscribers=[],this._isUserTabbing=!1}var b=a.prototype;return b.subscribe=function(a){return 0===this._subscribers.length&&(this._isUserTabbing?this._tabToMouseListener():this._mouseToTabListener()),this._subscribers.includes(a)||this._subscribers.push(a),this._unsubscribe(a)},b._unsubscribe=function(a){var b=this;return function(){b._subscribers=b._subscribers.filter(function(b){return b!==a}),0===b._subscribers.length&&b._removeAllListeners()}},b._setIsUserTabbing=function(a){this._isUserTabbing=a,this._subscribers.forEach(function(a){return a()})},b._tabToMouseListener=function(){window.removeEventListener("keydown",this._handleFirstTab),window.addEventListener("mousedown",this._handleFirstMouse)},b._mouseToTabListener=function(){window.removeEventListener("mousedown",this._handleFirstMouse),window.addEventListener("keydown",this._handleFirstTab)},b._removeAllListeners=function(){window.removeEventListener("mousedown",this._handleFirstMouse),window.removeEventListener("keydown",this._handleFirstTab)},(0,U.Z)(a,[{key:"value",get:function(){return this._isUserTabbing}}]),a}()),W=c(15963),X=c(37929),Y=c(46720),Z=function(){function a(b,c){(0,T.Z)(this,a),this.cancelled=!1,this.id=b,this.unit=c}var b=a.prototype;return b.process=function(){return this.unit()},b.cancel=function(){this.cancelled=!0},a}(),$=new(function(){function a(){(0,T.Z)(this,a),this.queue=[],this.queueRefs=new Map,this._listeners=new Map,this._queueLength=0,this._activeUnits=0}var b=a.prototype;return b.process=function(a){var b=this,c=(0,Y.z)(),d=new Z(c,a);this.queue.push(d),this.queueRefs.set(c,d);var e=new Promise(function(a,d){b._listeners.set(c,function(b){if((0,W.Z)(b,Error))return d(b);a(b)})});return this._queueLength++,this.flush(),[e,function(){return b.cancel(c)}]},b.cancel=function(a){var b=this.queueRefs.get(a);null==b||b.cancel(),this.flush()},b.cleanup=function(){var a=this;this.queue=this.queue.filter(function(b){var c=b.cancelled,d=b.id;return!c||(a.queueRefs.delete(d),!1)}),this._queueLength=this.queue.length},b.flush=function(){var a=this;return(0,e.Z)(h().mark(function b(){var c,d,e,f;return h().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(1!==a._activeUnits){b.next=2;break}return b.abrupt("return");case 2:if(0!==a._queueLength){b.next=5;break}return a.cleanup(),b.abrupt("return");case 5:if(!(null==(c=a.queue.shift())?void 0:c.cancelled)){b.next=10;break}return a._queueLength--,a.flush(),b.abrupt("return");case 10:if(c){b.next=13;break}return a.cleanup(),b.abrupt("return");case 13:return a._activeUnits++,b.prev=15,b.next=18,null==c?void 0:c.process();case 18:d=b.sent,b.next=24;break;case 21:b.prev=21,b.t0=b.catch(15),d=Error(b.t0);case 24:e=null==c?void 0:c.id,null==(f=a._listeners.get(e))||f(d),a.queueRefs.delete(e),a._activeUnits--,a._queueLength--,a.flush();case 31:case"end":return b.stop()}},b,null,[[15,21]])}))()},a}());function _(a,b,c){var d=(0,m.useRef)(b),e=(0,m.useState)(),f=e[0],g=e[1],h=(0,m.useState)(function(){var b=d.current(a);if(!(0,W.Z)(b,X.T))return b}),i=h[0],j=h[1];return(0,m.useEffect)(function(){var b,e,f=!1,h=function(a){try{f||j(a)}catch(b){f||g(b)}},i=function(){g(void 0);var c=d.current(a);if(!(0,W.Z)(c,X.T)){j(c);return}if(j(void 0),c.done)c.get().then(h);else{var e=$.process(function(){return c.get()});b=e[1],e[0].then(function(a){h(a)}).catch(function(a){g(a)})}};return i(),c&&a.subscribe&&(e=a.subscribe(c,i)),function(){null==b||b(),null==e||e(),f=!0}},[c,a]),(0,m.useMemo)(function(){return[i,f,j]},[f,i])}var aa=c(93219),ab=["Tab","ArrowLeft","ArrowRight","ArrowUp","ArrowDown",],ac=new(function(){function a(){var b=this;(0,T.Z)(this,a),this._handleFirstTab=function(a){ab.includes(a.key)&&(b._setIsUserTabbing(!0),b._tabToMouseListener())},this._handleFirstMouse=function(){b._setIsUserTabbing(!1),b._mouseToTabListener()},this._subscribers=[],this._isUserTabbing=!1}var b=a.prototype;return b.subscribe=function(a){return 0===this._subscribers.length&&(this._isUserTabbing?this._tabToMouseListener():this._mouseToTabListener()),this._subscribers.includes(a)||this._subscribers.push(a),this._unsubscribe(a)},b._unsubscribe=function(a){var b=this;return function(){b._subscribers=b._subscribers.filter(function(b){return b!==a}),0===b._subscribers.length&&b._removeAllListeners()}},b._setIsUserTabbing=function(a){this._isUserTabbing=a,this._subscribers.forEach(function(a){return a()})},b._tabToMouseListener=function(){window.removeEventListener("keydown",this._handleFirstTab),window.addEventListener("mousedown",this._handleFirstMouse)},b._mouseToTabListener=function(){window.removeEventListener("mousedown",this._handleFirstMouse),window.addEventListener("keydown",this._handleFirstTab)},b._removeAllListeners=function(){window.removeEventListener("mousedown",this._handleFirstMouse),window.removeEventListener("keydown",this._handleFirstTab)},(0,U.Z)(a,[{key:"value",get:function(){return this._isUserTabbing}}]),a}()),ad=(0,m.memo)(function(a){var b,c,d,f,g,n,p,u=a.isListView,v=a.isDragHandleEnabled,w=a.isTouchDevice,x=a.setIsDragHandleActive,y=a.fileOrPageState,z=a.checked,B=a.onToggleChecked,C=a.thumbnailSize,F=a.removeFile,M=a.downloadFiles,N=(a.tool,a.file),P=a.label,Q=a.selected,R=a.dragging,T=a.otherDragging,U=a.onFocus,W=a.onBlur,X=a.onClick,Y=a.isInteractable,Z=a.showCheckBox,$=void 0===Z||Z,ab=(0,l.$G)().t,ad=(0,s.Z)(),af=ad.background,ag=ad.onBackground,ah=ad.accent,ai=ad.secondaryText,aj=ad.selectedPage,ak=(0,A.I)().onOpen,al=function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:V,b=(0,m.useState)(a.value),c=b[0],d=b[1];return(0,m.useEffect)(function(){return a.subscribe(function(){return d(a.value)})},[a]),c}(ac),am=(b=U,c=W,f=(d=(0,m.useState)(!1))[0],g=d[1],n=(0,m.useCallback)(function(a){g(!0),null==b||b(a)},[b]),p=(0,m.useCallback)(function(a){g(!1),null==c||c(a)},[c]),{focused:f,handleOnFocus:n,handleOnBlur:p}),an=am.focused,ao=am.handleOnFocus,ap=am.handleOnBlur,aq=(0,D.Z)(_(N,function(a){return a.thumbnail},"onthumbnailchange"),2),ar=aq[0],as=aq[1],at=(0,D.Z)(_(N,function(a){return a.name},"onnamechange"),1),au=at[0],av=function(a){a.stopPropagation()},aw=(0,o.Z)(),ax=aw.operation,ay=aw.stepObject,az=(0,H.Z)(ax.route).deleteAutosavedFile,aA=(0,q.Z)().removeFilesFromFileCache,aB=(0,J.Z)().removeFromFilesCache,aC=(0,m.useCallback)(function(a){a.stopPropagation(),B&&B(N.id)},[N.id,B]),aD=(0,m.useMemo)(function(){return{wrapperBg:Q?aj:"files"===y?af:ag,wrapperBorderColor:Q?aj:"files"===y?af:ag,pageBg:Q?aj:"pages"===y&&u?af:ag,pageH:106}},[af,y,ag,Q,aj,u,]),aE=aD.wrapperBg,aF=aD.wrapperBorderColor,aG=aD.pageBg,aH=aD.pageH,aI=(0,D.Z)((0,K.Z)("files"===y?N:void 0),2),aJ=aI[0],aK=aI[1],aL=(0,m.useCallback)((0,e.Z)(h().mark(function a(){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(ay.step!==r.h8.DOWNLOAD_FILES){a.next=5;break}return a.next=3,aA((0,q.L)(null==ax?void 0:ax.tool),[N,]);case 3:a.next=8;break;case 5:if(ay.step!==r.h8.EDIT_INPUT){a.next=8;break}return a.next=8,aB([(0,J.W)(null==ax?void 0:ax.tool,ay.step),]);case 8:F(N),az();case 10:case"end":return a.stop()}},a)})),[N,F,az,null==ax?void 0:ax.tool,ay]),aM=(0,m.useCallback)(function(){return N.rotate()},[N]),aN=function(){x&&x(!0)},aO=function(){x&&x(!1)},aP=(0,I.Z)().download;return(0,i.jsx)(j.xu,{p:1,w:C.width+"px",h:C.height+"px",children:(0,i.jsx)(j.xu,{w:"full",h:"full",borderRadius:"lg",boxShadow:R?void 0:an&&al?"outline":"xs",border:R?"2px dashed":void 0,borderColor:ah,position:"relative",role:"group",children:u?(0,i.jsxs)(O,{opacity:R?0:1,pointerEvents:T?"none":void 0,onClick:X,cursor:v?"grab":"default",overflow:"hidden",noFocusStyle:!0,onFocus:ao,onBlur:ap,display:"flex",alignItems:"center",flexDir:"row",borderRadius:"lg",borderWidth:4,w:"full",h:"full",bg:aE,borderColor:aF,transition:"background-color 0.2s ease-in-out, border-color 0.2s ease-in-out",_groupHover:{bg:"apryse.blue.5",cursor:"pointer",borderColor:"apryse.blue.5"},children:[v?(0,i.jsx)(k.JO,{onTouchStart:w?function(){return aN()}:void 0,onTouchEnd:w?function(){return aO()}:void 0,w:8,px:2,h:"full",as:G.U9V,color:ai}):void 0,$&&"pages"===y&&(0,i.jsx)(E.XZ,{"data-testid":"thumbnail-checkbox",isChecked:z.includes(N.id),onChange:aC,onClick:av,mx:1}),(0,i.jsx)(j.kC,{bg:aG,transition:"background-color 0.2s ease-in-out",_groupHover:{bg:"apryse.blue.5"},p:1,mx:1,children:(0,i.jsx)(j.kC,{justify:"center",align:"center",direction:"column",flex:"1 1 auto",pointerEvents:"none",h:"2rem",w:"2rem",children:(0,i.jsx)(S,{src:ar,alt:au,pending:!ar&&!as,onRenderLoading:function(){return(0,i.jsx)(aa.Z,{small:!0,loading:!0})},onRenderFallback:function(){return(0,i.jsx)(aa.Z,{small:!0,extension:N.extension})},className:"ui__thumbnail__image"})})}),(0,i.jsx)(j.xu,{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",alignItems:"center",fontSize:"sm",mx:1,flex:"1 1 auto",children:(null!=P?P:au)?null!=P?P:au:void 0}),(0,i.jsxs)(j.xu,{d:"flex",justifyContent:"flex-end",alignItems:"center",h:"full",children:["files"===y?(0,i.jsxs)(i.Fragment,{children:[0===aJ||aK||!L.d6.includes(N.extension)?void 0:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(j.xu,{overflow:"hidden",whiteSpace:"nowrap",mr:"2px",children:(0,i.jsx)(j.xv,{textAlign:"center",fontSize:"sm",color:ai,children:aJ})}),(0,i.jsx)(k.JO,{as:t.aA,color:ai}),(0,i.jsx)(j.iz,{mx:2,h:6,d:"block",orientation:"vertical"})]}),(0,i.jsx)(ae,{onClick:aL,"aria-label":ab("edit_input.delete_file"),icon:t.XH,isListView:!0})]}):(0,i.jsx)(i.Fragment,{children:!1!==Y&&(0,i.jsx)(ae,{onClick:aM,"aria-label":ab("edit_input.rotate_page"),icon:t.$b,isListView:!0})}),L.ig.includes(N.extension)?void 0:(0,i.jsx)(ae,{onClick:function(){return ak(N)},"aria-label":ab("edit_input.view_file"),icon:t.ci,isListView:!0}),M&&ax?(0,i.jsx)(ae,{onClick:function(){return aP(ax,[N])},"aria-label":ab("download"),icon:t._8,isListView:!0}):void 0]})]}):(0,i.jsxs)(O,{opacity:R?0:1,pointerEvents:T?"none":void 0,onClick:X,cursor:v?"grab":"default",overflow:"hidden",noFocusStyle:!0,onFocus:ao,onBlur:ap,display:"flex",flexDir:"column",borderRadius:"lg",borderWidth:4,w:"full",h:"full",bg:aE,borderColor:aF,children:[(0,i.jsxs)(j.kC,{bg:aG,flex:"1 1 auto",p:2,align:"center",direction:"column",children:[v?(0,i.jsx)(k.JO,{onTouchStart:w?function(){return aN()}:void 0,onTouchEnd:w?function(){return aO()}:void 0,h:6,pb:2,as:G.U9V,color:ai}):"pages"===y?(0,i.jsx)(j.xu,{h:6}):void 0,(0,i.jsx)(j.kC,{justify:"center",align:"center",direction:"column",flex:"1 1 auto",pointerEvents:"none",h:aH,w:"full",children:(0,i.jsx)(S,{src:ar,alt:au,pending:!ar&&!as,onRenderLoading:function(){return(0,i.jsx)(aa.Z,{loading:!0})},onRenderFallback:function(){return(0,i.jsx)(aa.Z,{extension:N.extension})},className:"ui__thumbnail__image"})})]}),(0,i.jsx)(j.xu,{h:"files"===y?86:void 0,children:(null!=P?P:au)?(0,i.jsx)(j.xv,{fontSize:"sm",p:1,textAlign:"center",noOfLines:2,children:null!=P?P:au}):void 0}),L.ig.includes(N.extension)?void 0:(0,i.jsx)(ae,{onClick:function(){return ak(N)},"aria-label":ab("edit_input.view_file"),icon:t.ci,position:"top-left"}),M&&ax?(0,i.jsx)(ae,{onClick:function(){return aP(ax,[N])},"aria-label":ab("download"),icon:t._8,position:"bottom-right"}):void 0,"files"===y?(0,i.jsxs)(i.Fragment,{children:[0===aJ||aK||!L.d6.includes(N.extension)?void 0:(0,i.jsx)(j.xv,{textAlign:"center",fontSize:"xs",color:ai,mx:6,position:"absolute",bottom:4,left:2,right:2,children:ab("pages",{count:aJ})}),(0,i.jsx)(ae,{onClick:aL,"aria-label":ab("edit_input.delete_file"),icon:t.XH,position:"bottom-left"})]}):(0,i.jsxs)(i.Fragment,{children:[$&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(E.XZ,{"data-testid":"thumbnail-checkbox",position:"absolute",top:2,right:2,isChecked:z.includes(N.id),onChange:aC,onClick:av})}),!1!==Y&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(ae,{onClick:aM,"aria-label":ab("edit_input.rotate_page"),icon:t.$b,position:"bottom-right"})})]})]})})})});function ae(a){var b=a.isListView,c=a.onClick,d=a["aria-label"],e=a.icon,f=a.position,g=(0,m.useCallback)(function(a){a.stopPropagation(),c()},[c]),h=(0,m.useMemo)(function(){return{top:"top-right"===f||"top-left"===f?2:void 0,right:"top-right"===f||"bottom-right"===f?2:void 0,bottom:"bottom-right"===f||"bottom-left"===f?2:void 0,left:"top-left"===f||"bottom-left"===f?2:void 0}},[f]),j=h.top,l=h.right,n=h.bottom,o=h.left;return(0,i.jsx)(F.u,{hasArrow:!0,placement:"top",label:d,children:(0,i.jsx)(w.hU,{position:b?void 0:"absolute",top:j,right:l,bottom:n,left:o,icon:(0,i.jsx)(k.JO,{w:b?6:5,h:b?6:5,as:e,color:"gray.600"}),h:b?9:6,minW:6,w:b?9:6,_notLast:{marginRight:f?void 0:1},_last:{marginRight:f?void 0:1},variant:"ghost","aria-label":d,onClick:g})})}var af=ad,ag=c(46213),ah=c(1446),ai=c(6445),aj=c(50561),ak=c(69834),al=(0,m.memo)(function(a){var b=a.isListView,c=a.thumbnailSize,d=a.fileOrPageState,e=(0,l.$G)().t,f=(0,ah.B)().onOpenSelectFilesModal,g=(0,ai.Y)().isSubscribed,h=(0,aj.Z)(),k=h.showBulkUploadModal,m=h.isBulkUploadCheckEnabled;return(0,i.jsx)(j.xu,{p:1,w:c.width+"px",h:c.height+"px",children:(0,i.jsx)(j.xu,{w:"full",h:"full",borderRadius:"lg",border:"2px dashed",borderColor:"#DDE6EE",position:"relative",cursor:"pointer",onClick:function(){g||!m?f({goToOperation:void 0,goToStep:void 0,source:M.Ni}):k()},children:b?(0,i.jsxs)(j.xu,{display:"flex",alignItems:"center",pt:"7px",pl:"15px",fontSize:"20px",children:[(0,i.jsx)(ag.Ee,{as:t.y7,w:"25px",display:"inline",mr:"13px"}),(0,i.jsx)("p",{children:e("edit_input.add_files")}),!g&&m&&(0,i.jsx)(ak.Z,{ml:"10px"})]}):(0,i.jsxs)(j.xu,{textAlign:"center",position:"relative",mt:"pages"===d?"50px":"70px",fontSize:"pages"===d?"16px":"20px",display:"flex",flexDir:"column",alignItems:"center",children:[(0,i.jsx)(ag.Ee,{as:t.y7,w:"pages"===d?"32px":"35px",mb:"10px",display:"inline"}),(0,i.jsx)("p",{children:e("edit_input.add_files")}),!g&&m&&(0,i.jsx)(ak.Z,{mt:"5px"})]})})})}),am=c(40693),an=c(82094),ao=c(9019),ap=function(a){var b=a.children;return(0,i.jsx)(am.W,{backend:an.ZP,options:ao.Z,children:b})},aq=c(9202),ar=c(73854),as=c(97833),at=c(16711),au=c(59439),av=c(95971),aw={Draggable:"draggable"},ax={stiffness:300,damping:30},ay=(0,m.forwardRef)(function(a,b){var c=a.index,d=a.disableDrag,e=a.hideDragPreview,f=a.preventAnimation,g=a.onRenderChildren,h=a.onMove,j=a.onDragChange,k=a.children,l=a.className,n=(0,v.Z)(a,["index","disableDrag","hideDragPreview","preventAnimation","onRenderChildren","onMove","onDragChange","children","className"]),o=(0,m.useRef)(null);(0,m.useImperativeHandle)(b,function(){return o.current});var p=(0,D.Z)((0,ar.L)({accept:aw.Draggable,hover:function(a){var b=a.index,d=c;b!==d&&(null==h?void 0:h(b,d))&&(a.index=d)}}),2),q=p[1],r=(0,D.Z)((0,as.c)({item:{type:aw.Draggable,index:c},collect:function(a){return{isDragging:a.isDragging()}},canDrag:!d}),3),s=r[0].isDragging,t=r[1],w=r[2];(0,m.useEffect)(function(){e&&w((0,at.r)(),{captureDraggingState:!0})},[e,w]);var x=(0,av.N)(j);(0,m.useEffect)(function(){if(s&&x.current){var a;return null===(a=x.current)|| void 0===a||a.call(x,!0),function(){var a;return null===(a=x.current)|| void 0===a?void 0:a.call(x,!1)}}},[s,x]),t(q(o));var z=(0,m.useState)({x:0,y:0}),A=z[0],B=z[1],C=(0,m.useRef)(c),E=(0,av.N)(s||f);(0,m.useEffect)(function(){if(o.current&&!E.current){var a,b=C.current-c,d=(0,N.Zs)(o.current,b),e=null!==(a=null==d?void 0:d.getBoundingClientRect())&& void 0!==a?a:{},f=e.left,g=e.top,h=o.current.getBoundingClientRect(),i=h.left,j=h.top,k=void 0===f?0:f-i,l=void 0===g?0:g-j;B({x:k/6,y:l/6}),C.current=c}},[c,E]),(0,m.useEffect)(function(){(0!==A.x||0!==A.y)&&requestAnimationFrame(function(){return B({x:0,y:0})})},[A]);var F=(0,m.useMemo)(function(){return E.current?{x:0,y:0}:{x:0===A.x?(0,au.ST)(A.x,ax):A.x,y:0===A.y?(0,au.ST)(A.y,ax):A.y}},[A,E]),G=Q()("ui__base ui__draggable",l),H=(0,m.useCallback)(function(a){var b=a.x,c=a.y;return(0,i.jsx)("div",(0,y.Z)((0,u.Z)({},n),{ref:o,className:G,children:(0,i.jsx)("div",{style:{WebkitTransform:"translate3d(".concat(b,"px, ").concat(c,"px, 0)"),transform:"translate3d(".concat(b,"px, ").concat(c,"px, 0)")},className:Q()("ui__draggable__animated",{"ui__draggable__animated--inMotion":!!(b||c)}),children:g?g(s):k})}))},[k,n,G,s,g]);return(0,i.jsx)(au.y_,{style:F,children:H})}),az=c(23295),aA=c(78254),aB=(0,m.memo)(function(a){var b,c,d,e=a.columnIndex,f=a.rowIndex,g=a.style,h=a.data,i=(b=f,c=e,b*(d=h.columnCount)+c),j=h.files[i];return j?"lastItem"===j.id?h.renderLast(g):h.renderItem(j,i,g):null}),aC=(0,m.memo)((0,m.forwardRef)(function(a,b){var c=a.width,d=a.height,e=a.files,g=a.padding,h=a.renderItem,j=a.onColumnCountChange,k=a.size,l=a.renderLast,n=a.disableRenderLast,o=c-2*g,p=(0,m.useMemo)(function(){var a=Math.floor(o/k.width),b=(0,f.Z)(e);return n||(b=e.concat({id:"lastItem"})),a>b.length&&(a=b.length),{files:b,renderItem:h,columnCount:a,renderLast:l}},[o,k.width,e,h,l,n,]);return(0,m.useEffect)(function(){j(p.columnCount)},[j,p.columnCount]),(0,i.jsx)(aA.Ym,{ref:b,columnWidth:k.width,rowHeight:k.height,height:d-2*g,width:o,style:{padding:g,height:d,width:c},columnCount:p.columnCount,rowCount:Math.ceil(p.files.length/p.columnCount),itemData:p,itemKey:function(a){var b,c,d,f,g,h=a.columnIndex,i=a.rowIndex,j=(d=i,f=h,d*(g=p.columnCount)+f);return null!==(c=null===(b=e[j])|| void 0===b?void 0:b.id)&& void 0!==c?c:j},children:aB})})),aD=(0,m.memo)((0,m.forwardRef)(function(a,b){var c=a.files,d=a.padding,e=a.size,f=a.renderItem,g=a.onColumnCountChange,h=a.renderLast,j=a.disableRenderLast,k=(0,m.useCallback)(function(a){var k=a.width,l=a.height;return(0,i.jsx)(aC,{padding:d,ref:b,width:k,height:l,files:c,size:e,renderItem:f,onColumnCountChange:g,renderLast:h,disableRenderLast:j})},[d,b,c,e,f,g,h,j,]);return(0,i.jsx)(az.Z,{children:k})})),aE={width:240,height:240};function aF(a){var b=a.files,c=a.onMove,d=a.onDragChange,e=a.onDeselectAll,f=a.onSelectAll,g=a.onRenderThumbnail,h=a.onRenderLast,k=a.disableRenderLast,l=a.onRenderDragLayer,n=a.disableMove,o=a.preventArrowsToMove,p=a.preventClickAwayDeselect,q=a.draggingIds,r=a.padding,s=a.gridRef,t=a.thumbnailSize,w=a.noProvider,x=a.className,z=a.onClick,A=a.onKeyDown,B=a.style,C=(0,v.Z)(a,["files","onMove","onDragChange","onDeselectAll","onSelectAll","onRenderThumbnail","onRenderLast","disableRenderLast","onRenderDragLayer","disableMove","preventArrowsToMove","preventClickAwayDeselect","draggingIds","padding","gridRef","thumbnailSize","noProvider","className","onClick","onKeyDown","style"]),D=(0,m.useRef)(null),E=(0,m.useRef)(null);(0,m.useImperativeHandle)(s,function(){return E.current});var F=(0,m.useState)(0),G=F[0],H=F[1],I=(0,m.useState)(),J=I[0],K=I[1],L=(0,m.useState)(),M=L[0],O=L[1],P=b.length>0,R=(0,m.useCallback)(function(){if(!P||!D.current)return aE;var a=D.current.querySelector('div[draggable="true"]'),b=null==a?void 0:a.firstChild,c=null==b?void 0:b.firstChild;return c?c.getBoundingClientRect():aE},[P]),S=(0,m.useState)(function(){return t||R()}),T=S[0],U=S[1];(0,m.useEffect)(function(){return t?U(t):0===b.length?U(aE):void U(function(a){var b=R(),c=b.width,d=b.height;return a.width===c&&a.height===d?a:{width:c,height:d}})},[b,R,t]);var V=(0,m.useCallback)(function(a){null==d||d(a),O(a)},[d]),W=(0,m.useCallback)(function(a,b,d,e){var f=0;switch(a.key){case"ArrowLeft":f=-1;break;case"ArrowRight":f=1;break;case"ArrowUp":f=-1*G;break;case"ArrowDown":f=G;break;default:return}a.preventDefault();var g=!1;if(!o&&(a.metaKey||a.ctrlKey)&&!n&& void 0===J&&c&&(g=!0,c(b,b+f)),E.current){var h=(0,N.Zs)(e.current,f);if(h&&!(a.metaKey||a.ctrlKey)){var i=h.querySelector(N.yT);i&&(g=!0,requestAnimationFrame(function(){i.focus()}))}if(g&&!(0,N.vL)(h,D.current).isVisible){var j,k,l=(j=b+f,{rowIndex:Math.floor(j/(k=G)),columnIndex:j%k}).rowIndex;E.current.scrollToItem({align:"smart",rowIndex:l})}}},[G,n,J,c,o]),X=Math.max(1,r||0),Y=(0,m.useCallback)(function(a){return(0,i.jsx)(j.xu,{style:a&&(0,y.Z)((0,u.Z)({},a),{top:"number"==typeof a.top?a.top+X:a.top,left:"number"==typeof a.left?a.left+X:a.left}),children:h()})},[h]),Z=(0,m.useCallback)(function(a,b,d){if(!a)return(0,i.jsx)(m.Fragment,{children:null},"__null");var e=J===a.id,f=!!(M&&M!==a.id||q&&q.length&&!q.includes(a.id)),h=(0,m.createRef)(),j=!!q&&q.includes(a.id);return(0,i.jsx)(ay,{"data-file-id":a.id,index:b,style:d&&(0,y.Z)((0,u.Z)({},d),{top:"number"==typeof d.top?d.top+X:d.top,left:"number"==typeof d.left?d.left+X:d.left}),ref:h,hideDragPreview:!!l,preventAnimation:j,onDragChange:function(b){return V(b?a.id:void 0)},disableDrag:e||n,onMove:c,onKeyDown:function(c){return W(c,b,a,h)},onRenderChildren:function(c){return g({onRenderThumbnailProps:{file:a,dragging:c||j,otherDragging:f,onEditingChange:function(b){return K(b?a.id:void 0)}},id:a.id,index:b})}},a.id)},[J,M,q,X,l,n,c,V,W,g,]),$=(0,m.useCallback)(function(a){null==z||z(a),p||null==e||e()},[e,z,p]),_=(0,m.useCallback)(function(a){if(null==A||A(a),"Escape"===a.key)return null==e?void 0:e();"a"===a.key&&(a.metaKey||a.ctrlKey)&&(null==f||f(),a.preventDefault())},[e,f,A]),aa=(0,m.useCallback)(function(a){var b=a.mousePosition,c=b.x-120,d=b.y-120;return{x:c,y:d}},[]),ab=Q()("ui__base ui__fileOrganizer",x),ac=w?m.Fragment:ap;return(0,i.jsx)(ac,{children:(0,i.jsxs)("div",(0,y.Z)((0,u.Z)({},C),{className:ab,ref:D,onClick:$,onKeyDown:_,style:B,role:"grid",tabIndex:0,children:[(0,i.jsx)(aD,{ref:E,files:b,padding:X,size:T,renderItem:Z,onColumnCountChange:H,renderLast:Y,disableRenderLast:k}),l?(0,i.jsx)(aq.r,{customTranslate:aa,children:(0,i.jsx)("div",{className:"ui__fileOrganizer__draglayer",style:{height:240,width:240},children:l()})}):void 0]}))})}(aG=d||(d={}))[aG.Gallery=1]="Gallery",aG[aG.List=2]="List";var aG,aH={width:188,height:240},aI={width:144,height:181},aJ=(0,m.memo)(function(a){var b=a.view,c=a.maxSize,e=a.loading,f=a.top,g=a.bottom,h=a.disableMove,k=a.downloadFiles,l=a.tool,n=a.queue,o=a.maxFiles,p=a.allowFileSelect,q=(0,B.Z)("xl"),r=(0,B.Z)("md"),s=(0,m.useRef)(r),t=(0,m.useRef)(b),v=n.isInteractable,w=n.removeFile,x=n.fileOrganizerProps,D=n.fileOrPageState,E=n.getThumbnailSelectionProps,F=n.checked,G=void 0===F?[]:F,H=n.onToggleChecked,I=(0,m.useState)("files"===D?aH:aI),J=I[0],K=I[1],L=(0,m.useRef)(q?24:16);(0,m.useEffect)(function(){L.current=q?24:16},[q]),(0,m.useEffect)(function(){if(t.current=b,r&&b!==d.List)K("files"===D?aH:aI);else{var a=document.querySelector("div.ui__base.ui__fileOrganizer");K({width:a?a.clientWidth-2*L.current:0,height:56})}},[b,r,K,D]),(0,m.useEffect)(function(){s.current=r},[r]);var M=(0,m.useState)(!1),N=M[0],O=M[1],P=(0,m.useMemo)(function(){return"ontouchstart"in window||"undefined"!=typeof navigator&&navigator.msMaxTouchPoints>0},[]),Q=(0,m.useMemo)(function(){return r||!P?h:h||!N},[r,h,N,P]),R=(0,m.useCallback)(function(){if(s.current&&t.current!==d.List)K("files"===D?aH:aI);else{var a=document.querySelector("div.ui__base.ui__fileOrganizer");K({width:a?a.clientWidth-2*L.current:0,height:56})}},[]),S=(0,m.useState)(!0),T=S[0],U=S[1],V=(0,m.useMemo)(function(){return!!o&&x.files.length>=o},[x.files,o]);return(0,m.useEffect)(function(){if(!T){var a=window.setTimeout(function(){if(r&&b!==d.List)K("files"===D?aH:aI);else{var a=document.querySelector("div.ui__base.ui__fileOrganizer");K({width:a?a.clientWidth-2*L.current:0,height:56})}},0);return function(){window.clearTimeout(a)}}},[T]),(0,m.useEffect)(function(){window.addEventListener("resize",R);var a=window.setTimeout(function(){return U(!1)},0);return function(){window.clearTimeout(a),window.removeEventListener("resize",R)}},[]),(0,i.jsx)(ap,{children:(0,i.jsx)(A.Z,{children:(0,i.jsxs)(C.Z,{topComponent:f,bottomComponent:g,maxSize:c,children:[T?null:(0,i.jsx)(aF,(0,y.Z)((0,u.Z)({noProvider:!0},x),{disableMove:Q,thumbnailSize:J,padding:L.current,onRenderThumbnail:function(a){var c=a.id,e=a.onRenderThumbnailProps;return(0,i.jsx)(af,(0,y.Z)((0,u.Z)({isListView:!r||b===d.List,isDragHandleEnabled:!h&&r,isTouchDevice:P},null==E?void 0:E(c),e),{downloadFiles:k,tool:l,fileOrPageState:D,checked:G,onToggleChecked:H,thumbnailSize:J,removeFile:w,setIsDragHandleActive:O,isInteractable:v,showCheckBox:p}))},onRenderLast:function(){return(0,i.jsx)(al,{isListView:!r||b===d.List,isTouchDevice:P,thumbnailSize:J,fileOrPageState:D})},disableRenderLast:!p||V})),e?(0,i.jsx)(j.M5,{position:"absolute",top:0,bottom:0,left:0,right:0,children:(0,i.jsx)(z.$,{})}):void 0]})})})});function aK(a){var b=a.left,c=a.right,e=a.view,f=a.setView,g=(0,l.$G)().t,h=(0,B.Z)("md"),k=(0,s.Z)().background;(0,m.useLayoutEffect)(function(){try{localStorage.getItem("FILE_ORGANIZER_VIEW_MODE")&&f(d[localStorage.getItem("FILE_ORGANIZER_VIEW_MODE")])}catch(a){console.warn("Unable to retrieve file organizer view mode from local storage")}});var n=g(e===d.Gallery?"edit_input.list_view":"edit_input.gallery_view"),o=(0,m.useCallback)(function(){f(function(a){var b=a===d.List?d.Gallery:d.List;try{localStorage.setItem("FILE_ORGANIZER_VIEW_MODE",d[b])}catch(c){console.warn("Unable to set file organizer view mode to local storage")}return b})},[f]);return(0,i.jsxs)(j.Ug,{bg:k,spacing:0,flexShrink:0,h:10,borderTopRadius:{base:0,md:"lg"},borderBottomWidth:1,justify:"space-between",children:[b||(0,i.jsx)(j.xu,{}),(0,i.jsxs)(j.Ug,{flexShrink:0,h:"full",children:[c,h&&(0,i.jsx)(F.u,{hasArrow:!0,placement:"top",label:n,openDelay:M.G7,d:{base:"none",md:"flex"},children:(0,i.jsx)(w.hU,{d:{base:"none",md:"flex"},h:"full",onClick:function(){return o()},"aria-label":n,icon:e===d.Gallery?(0,i.jsx)(t.Gz,{width:24,height:24}):(0,i.jsx)(t.KR,{width:24,height:24}),borderRadius:0,borderTopRightRadius:{base:0,md:"lg"},variant:"ghost",borderLeftWidth:1})}),(0,i.jsx)(j.xu,{d:{md:"none"}})]})]})}function aL(){var a=(0,l.$G)().t,b=(0,s.Z)(),c=b.background,g=b.secondaryText,u=(0,p.n)().allowedFileTypes,v=(0,o.Z)(),w=v.operation,y=v.goToBeginning,z=v.setStepByName,A=w.maxFileSize,B=w.tool,C=(0,m.useState)(d.List),D=C[0],E=C[1],F=(0,n.Kj)(),G=(0,q.Z)(),H=G.saveOutputFiles,I=G.populateCacheFilesToOutputQueue,J=G.getFilesFromCache;return(0,m.useEffect)(function(){(0,e.Z)(h().mark(function a(){var b;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(F.files.length>0)){a.next=3;break}return a.next=3,H((0,q.L)(B),(0,f.Z)(F.files));case 3:if(0!==F.files.length){a.next=13;break}return a.next=6,J((0,q.L)(B));case 6:if(!((b=a.sent)&&b.length>0)){a.next=12;break}return a.next=10,I((0,q.L)(B));case 10:a.next=13;break;case 12:z(r.h8.SELECT_FILES);case 13:case"end":return a.stop()}},a)}))()},[F.files,B]),(0,i.jsx)(i.Fragment,{children:F.numFiles>0&&(0,i.jsx)(aJ,{queue:F,view:D,disableMove:!0,downloadFiles:!0,allowedFileTypes:u,maxSize:A,tool:B,top:(0,i.jsx)(aK,{view:D,setView:E}),allowFileSelect:!1,bottom:(0,i.jsxs)(j.xu,{w:"full",flexShrink:0,pt:2,children:[(0,i.jsx)(j.xv,{color:g,w:"full",textAlign:"center",mb:2,children:a("edit_input.drop_files")}),(0,i.jsx)(x,{bg:c,borderTopWidth:1,w:"full",variant:"ghost",colorScheme:"gray",leftIcon:(0,i.jsx)(k.JO,{as:t.y7}),onClick:function(){y()},place:"bottom",children:a("edit_input.add_files")})]})})})}var aM=c(21084),aN=c(70409),aO=c(12938),aP=c(74566),aQ=c(93299),aR=c(78602);function aS(){var a=(0,l.$G)().t,b=(0,o.Z)(),c=b.previousStep,g=b.stepObject,n=(0,p.n)(),q=n.numberOfFilesAllowed,u=n.allowedFileTypes,v=b.operation,y=v.maxFiles,z=v.maxFileSize,A=(0,aQ.hZ)(),B=A.numFiles,C=A.isInteractable,D=A.setFileOrPageState,E=A.fileOrPageState,F=A.uncheckAll,G=A.checkAll,H=A.setFiles,I=A.fileOrganizerProps,K=(0,s.Z)(),L=K.background,N=K.secondaryText,O=(0,ah.B)().onOpenSelectFilesModal,P=(0,J.Z)(),Q=P.saveProcessedFilesToFileCache,R=P.populateCacheFilesToFilesQueue,S=P.getFilesFromCache;(0,m.useEffect)(function(){A.files.length>0&&Q((0,J.W)(v.tool,r.h8.EDIT_INPUT),(0,f.Z)(A.files),E)},[A.files,E]),(0,m.useEffect)(function(){(0,e.Z)(h().mark(function a(){var b;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(0!==B){a.next=10;break}return a.next=3,S((0,J.W)(v.tool,r.h8.EDIT_INPUT));case 3:if(!((b=a.sent)&&b.length>0)){a.next=9;break}return a.next=7,R((0,J.W)(v.tool,r.h8.EDIT_INPUT));case 7:a.next=10;break;case 9:c();case 10:case"end":return a.stop()}},a)}))()},[B,R]),(0,m.useEffect)(function(){g.disableFileView&&D("pages")},[D,g.disableFileView]);var T=(0,m.useRef)(null),U=(0,aM.qY)(),V=U.onOpen,W=U.onClose,X=U.isOpen,Y=(0,ai.Y)().isSubscribed,Z=(0,aj.Z)(),$=Z.showBulkUploadModal,_=Z.resetModalState,aa=Z.canApplyCustomCloseFnForBulkUpload,ab=Z.isBulkUploadCheckEnabled,ac=(0,aN.pm)({isClosable:!0,position:"bottom"}),ad=(0,m.useCallback)(function(){D("pages"),aR.n.track("Pages View",{"Page Name":v.tool})},[D,v]),ae=(0,m.useCallback)(function(){D("files"),W()},[W,D]),af=(0,m.useState)(d.Gallery),ag=af[0],al=af[1];(0,m.useEffect)(function(){aa&&(H([I.files[0]]),_(),ac({duration:3e3,status:"info",variant:"plain",title:a("upgrade_modal.bulk_upload.one_file_added")}))},[aa,I,H,_,]),(0,m.useEffect)(function(){ab&&B>1&&!Y&&$(!0)},[ab,Y,B,$,]);var am=(0,m.useMemo)(function(){if("files"===E){var b;if(!g.disablePageView)return(0,i.jsxs)(x,{h:"full",w:"full",variant:"ghost",colorScheme:"gray",leftIcon:(0,i.jsx)(k.JO,{as:t.UU}),onClick:ad,place:"top-left",children:[(null==g?void 0:g.customPageViewButton)?a(g.customPageViewButton.label):a("edit_input.view_pages"),(null==g?void 0:null===(b=g.customPageViewButton)|| void 0===b?void 0:b.isProFeature)&&!Y?(0,i.jsx)(ak.Z,{mt:"4px",ml:"10px"}):null]},1)}else{if(g.disableFileView)return;return(0,i.jsx)(x,{h:"full",variant:"ghost",color:"apryse.indigo",leftIcon:(0,i.jsx)(aP.sG8,{}),borderRightWidth:1,onClick:V,place:"top-left",children:a("edit_input.file_view")})}},[E,g.disablePageView,g.disableFileView,g.customPageViewButton,ad,a,V,]);return(0,i.jsxs)(ap,{children:[(0,i.jsx)(aJ,{view:ag,queue:A,allowedFileTypes:u,maxSize:z,maxFiles:y,allowFileSelect:void 0!==g.disableCheckboxSelection?!g.disableCheckboxSelection:C,disableMove:!C,top:(0,i.jsx)(aK,{view:ag,setView:al,left:am,right:void 0!==g.disableCheckboxSelection&&g.disableCheckboxSelection||"files"===E?void 0:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(w.zx,{variant:"gray",size:"mini",onClick:F,"data-testid":"edit-input-clear-all",children:a("edit_input.clear")}),(0,i.jsx)(w.zx,{variant:"gray",size:"mini",onClick:G,"data-testid":"edit-input-select-all",children:a("edit_input.select_all")})]})}),bottom:"files"===E&&(void 0===q||q>0)?(0,i.jsxs)(j.xu,{w:"full",flexShrink:0,pt:2,children:[(0,i.jsx)(j.xv,{color:N,w:"full",textAlign:"center",mb:2,children:a("edit_input.drop_files")}),(0,i.jsxs)(x,{bg:L,borderTopWidth:1,w:"full",variant:"ghost",colorScheme:"gray",leftIcon:(0,i.jsx)(k.JO,{"data-testid":"add-new-page-icon",as:t.y7}),onClick:function(){Y||!ab?O({goToOperation:void 0,goToStep:void 0,source:M.Ni}):$()},place:"bottom",children:[a("edit_input.add_files"),!Y&&ab&&(0,i.jsx)(ak.Z,{ml:"10px"})]})]}):void 0}),(0,i.jsx)(aO.aR,{isCentered:!0,isOpen:X,leastDestructiveRef:T,onClose:W,children:(0,i.jsx)(aO.dh,{children:(0,i.jsxs)(aO._T,{children:[(0,i.jsx)(aO.fY,{fontSize:"lg",fontWeight:"semibold",children:a("edit_input.revert_header")}),(0,i.jsx)(aO.iP,{children:a("edit_input.revert_body")}),(0,i.jsxs)(aO.xo,{children:[(0,i.jsx)(w.zx,{variant:"gray",ref:T,onClick:W,children:a("cancel")}),(0,i.jsx)(w.zx,{onClick:ae,ml:3,children:a("continue")})]})]})})})]})}var aT=c(68567),aU=c(93586),aV=c(87051),aW=c(68133),aX=c(35269);function aY(a){var b=a.settings,c=a.nextStep,d=a.minLoadingTime,f=a.mergeAfterProcess,g=a.stepObject,k=(0,s.Z)().surface,p=(0,aQ.hZ)(),q=p.checked,t=p.files,v=p.resetFileState,w=p.fileOrPageState,x=(0,n.Kj)(),z=(0,o.Z)(),A=z.previousStep,B=z.setStepByName,C=z.operation,E=z.currentStepIndex,F=(0,m.useState)(void 0),G=F[0],H=F[1],I=(0,m.useState)(void 0===d),K=I[0],L=I[1],M=(0,m.useState)(""),N=M[0],O=M[1],P=(0,l.$G)().t,Q=(0,aU.Z)().processingErrorOccured,R=(0,aT.I0)(),S=(0,ai.Y)().isSubscribed,T=(0,J.Z)().removeFromFilesCache;C.tool,(0,m.useEffect)(function(){(0,e.Z)(h().mark(function a(){var c,d,e,i,j;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,c=[],c=!0===g.ignoreChecked&&"pages"===w?t.filter(function(a){return!q.includes(a.id)}):!1===g.ignoreChecked&&"pages"===w?t.filter(function(a){return q.includes(a.id)}):t,!g.processor){a.next=9;break}return a.next=6,g.processor(c,(0,y.Z)((0,u.Z)({},b),{setProcessingStatus:O,t:P,tool:C.tool}));case 6:a.t0=a.sent,a.next=10;break;case 9:a.t0=t;case 10:if(d=a.t0,!f){a.next=15;break}return a.next=14,(0,aW.Z)(d);case 14:d=a.sent;case 15:return 0===d.length?A():H(d),a.next=18,T([(0,J.W)(C.tool,C.flow[E-1].step),]);case 18:a.next=26;break;case 20:a.prev=20,a.t1=a.catch(0),(e=a.t1).files?(j=(i=(0,D.Z)(e.files,1))[0],p.resetFileState(),Q(a.t1,j)):Q(a.t1),v(),B(r.h8.SELECT_FILES);case 26:case"end":return a.stop()}},a,null,[[0,20]])}))()},[g]),(0,m.useEffect)(function(){var a;return void 0!==d&&(a=window.setTimeout(function(){return L(!0)},d)),function(){return clearTimeout(a)}},[d,g]);var U=(0,m.useCallback)((0,e.Z)(h().mark(function a(){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(G&&G.length>0)){a.next=7;break}if(g.keepProcessing?(p.setFiles(G),H(void 0)):(x.setFiles(G),p.resetFileState()),!(!g.skipUsageIncr&&!S)){a.next=5;break}return a.next=5,R((0,aV.iS)());case 5:aR.n.track("Tool Action",{"Page Name":C.tool}),c();case 7:case"end":return a.stop()}},a)})),[R,S,c,C.tool,x,G,p,g.keepProcessing,g.skipUsageIncr,]);return(0,m.useEffect)(function(){G&&(null==G?void 0:G.length)>0&&K&&U()},[G,K]),(0,i.jsxs)(j.M5,{bg:k,position:"relative",h:"full",borderRadius:{base:0,md:"lg"},borderWidth:{base:0,md:1},flexDir:"column",children:[(0,i.jsx)(aX.Z,{}),N&&(0,i.jsx)(j.xv,{children:N})]})}var aZ=c(44686),a$=c(56706),a_=c(21713),a0=c(59987),a1=c(98335),a2=c(12627),a3=c(86752),a4=c(71469),a5=c(38759),a6=c(39737),a7=c(64128),a8=function(a){var b=a.isModalOpen,c=a.fileUrlToRedirectTo,d=(0,a6.$G)().t,e=(0,aM.qY)(),f=e.isOpen,g=e.onOpen,h=e.onClose;return(0,m.useEffect)(function(){b?g():h()},[b]),(0,i.jsx)(a7.Z,{disclosure:{isOpen:f,onClose:h},autoFocus:!1,size:"sm",blockScrollOnMount:!1,closeOnEsc:!1,closeOnOverlayClick:!1,isCentered:!0,children:(0,i.jsxs)(aO.hz,{children:[(0,i.jsx)(aO.xB,{color:"gray.900",fontSize:"24px",fontWeight:"bold",children:d("reload_file_modal_for_chrome_extension.title")}),(0,i.jsx)(aO.fe,{color:"gray.600",fontSize:"14px",fontWeight:"semibold",children:d("reload_file_modal_for_chrome_extension.description")}),(0,i.jsx)(aO.mz,{children:(0,i.jsx)(w.zx,{size:"sm",variant:"blue",disabled:!c||0===c.length,onClick:function(){if(c&&c.length>0){var a=new URL(c);a.searchParams.set("fromPDFOnline","1"),window.history.pushState(null,"",window.location.href),window.location.replace(a.href)}},children:d("reload_file_modal_for_chrome_extension.accept")})})]})})},a9=c(24975),ba=c(54329);function bb(){var a=(0,aQ.hZ)().files,b=(0,o.Z)().operation,c=b.tool,d=(0,a$.Z)().setIsDesktopSideVisible,f=(0,a_.Z)(),g=f.hasError,k=f.setReloadFileModalVisibility,l=f.isReloadFileModalOpen,n=(0,aT.v9)(function(a){return a.application.currentMode}),p=(0,a5.Z)(),q=p.setWebViewerLeftPanelVisibility,r=p.isWebViewerLeftPanelOpened,s=(0,m.useRef)(null),t=(0,a4.Z)(),u=t.setValueInLocalStorage,v=t.getValueFromLocalStorage,w=(0,a9.Z)(b),x=w.autosaveStatusText,y=w.isXodoDriveAutoSaveEnabled,z=(0,a2.Z)({elementRef:s,options:{fullAPI:!0,enableRedaction:!0,enableMeasurement:!0,loadAsPDF:!0},onLoad:function(a){var b=a.Core.Tools,c=a.UI.Feature;k(!1);var d="1"===v(M.dR.USED_VIEWER_TOOL);a.UI.disableElements(["downloadButton","contentEditButton"]),a.UI.enableElements(["bookmarksPanel","bookmarksPanelButton"]),a.UI.enableFeatures([c.Initials,c.ContentEdit]),a.UI.enableBookmarkIconShortcutVisibility(),a.UI.setHeaderItems(function(b){b.get("toggleNotesButton").insertAfter({type:"actionButton",title:"action.download",img:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><defs><style>.cls-1{fill:#abb0c4;}</style></defs><title>icon - header - download</title><path class="cls-1" d="M11.55,17,5.09,9.66a.6.6,0,0,1,.45-1H8.67V2.6a.6.6,0,0,1,.6-.6h5.46a.6.6,0,0,1,.6.6V8.67h3.13a.6.6,0,0,1,.45,1L12.45,17A.6.6,0,0,1,11.55,17ZM3.11,20.18V21.6a.4.4,0,0,0,.4.4h17a.4.4,0,0,0,.4-.4V20.18a.4.4,0,0,0-.4-.4h-17A.4.4,0,0,0,3.11,20.18Z"></path></svg>',onClick:function(){a.UI.downloadPdf()}})});var f=function(b,c,e){!(b.length>0)||"add"!==c||e.imported||d||(u(M.dR.USED_VIEWER_TOOL,"1"),a.Core.annotationManager.removeEventListener("annotationChanged",f))};if(a.Core.annotationManager.addEventListener("annotationChanged",f),a.UI.addEventListener(a.UI.Events.VISIBILITY_CHANGED,function(a){var b=a.detail,c=b.element,d=b.isVisible;"leftPanel"===c&&q(d)}),r&&a.UI.openElements(["leftPanel"]),a.UI.enableBookmarkIconShortcutVisibility(),!d){var g=function(c){if("toolbarGroup-FillAndSign"===c.detail){var d=a.Core.documentViewer.getTool(a.Core.Tools.ToolNames.SIGNATURE);a.UI.setToolMode(b.ToolNames.SIGNATURE),d.cursor="crosshair",a.UI.removeEventListener(a.UI.Events.TOOLBAR_GROUP_CHANGED,g)}};a.Core.documentViewer.addEventListener("signaturesRestored",(0,e.Z)(h().mark(function b(){var c,d,e;return h().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!((d=(c=a.Core.documentViewer.getTool(a.Core.Tools.ToolNames.SIGNATURE)).getSavedSignatures()).length>0)){b.next=5;break}return b.next=5,c.setSignature(d[0]);case 5:if(!((e=c.getSavedInitials()).length>0)){b.next=9;break}return b.next=9,c.setInitials(e[0]);case 9:case"end":return b.stop()}},b)}))),a.UI.addEventListener(a.UI.Events.TOOLBAR_GROUP_CHANGED,g),a.UI.setToolbarGroup("toolbarGroup-View"),a.UI.setToolbarGroup("toolbarGroup-Annotate"),a.UI.setToolMode(b.ToolNames.FREETEXT)}},canInitialize:a.length>0}),A=z.instance,B=z.loadFile;return(0,m.useEffect)(function(){if(A){var a=function(a){"toolbarGroup-Edit"===a.detail&&"CropPage"!==A.UI.getToolMode().name&&A.UI.setToolMode(A.Core.Tools.ToolNames.CROP)};return A.UI.addEventListener(A.UI.Events.TOOLBAR_GROUP_CHANGED,a),function(){A.UI.removeEventListener(A.UI.Events.THEME_CHANGED,a)}}},[A]),(0,m.useEffect)(function(){return g&&n===a0.ft.CHROME_EXTENSION&&a&&a[0]&&a[0].fileUrl?(d(!1),k(!0)):(d(!0),k(!1)),function(){d(!0)}},[a,g,n]),(0,m.useEffect)(function(){var b;(b=(0,e.Z)(h().mark(function b(){return h().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!(a[0]&&!a[0].getMetadata("shouldNotLoadIntoViewer")&&A)){b.next=3;break}return b.next=3,B(A,a[0]);case 3:case"end":return b.stop()}},b)})),function(){return b.apply(this,arguments)})()},[a,A,B,c]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(j.xu,{h:"full",overflow:"hidden",position:"relative",children:[(0,i.jsx)(a3.Z,{elementId:"view_viewer",ref:s}),(0,i.jsx)(a8,{isModalOpen:l,fileUrlToRedirectTo:a&&a[0]&&a[0].fileUrl?(0,a1.XB)(a[0].fileUrl):void 0})]}),y&&(0,i.jsx)(j.xu,{display:{base:"flex",md:"none"},padding:"7px",justifyContent:"flex-end",children:(0,i.jsx)(ba.y,{text:x})})]})}function bc(){var a=(0,aQ.hZ)().files,b=(0,o.Z)().operation.tool,c=(0,a$.Z)().setIsDesktopSideVisible,d=(0,a_.Z)(),f=d.hasError,g=d.setReloadFileModalVisibility,k=d.isReloadFileModalOpen,l=(0,aT.v9)(function(a){return a.application.currentMode}),n=(0,m.useRef)(null),p=(0,a2.Z)({elementRef:n,options:{css:"webviewer-docx-editor.css",fullAPI:!0},onLoad:function(a){g(!1),a.UI.disableElements(["downloadButton","saveAsButton"])},canInitialize:a.length>0}),q=p.instance,r=p.loadFile;return(0,m.useEffect)(function(){return f&&l===a0.ft.CHROME_EXTENSION&&a&&a[0]&&a[0].fileUrl?(c(!1),g(!0)):(c(!0),g(!1)),function(){c(!0)}},[a,f,l]),(0,m.useEffect)(function(){var b;(b=(0,e.Z)(h().mark(function b(){return h().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!(a[0]&&q)){b.next=3;break}return b.next=3,r(q,a[0],{enableOfficeEditing:!0});case 3:case"end":return b.stop()}},b)})),function(){return b.apply(this,arguments)})()},[a,q,r,b]),(0,i.jsxs)(j.xu,{h:"full",overflow:"hidden",position:"relative",children:[(0,i.jsx)(a3.Z,{elementId:"docx_editor",ref:n}),(0,i.jsx)(a8,{isModalOpen:k,fileUrlToRedirectTo:a&&a[0]&&a[0].fileUrl?(0,a1.XB)(a[0].fileUrl):void 0})]})}var bd=(0,c(59389).m$)(function(a){var b=a.className,c=a.file,d=(0,D.Z)(_(c,function(a){return a.thumbnail},"onthumbnailchange"),2),e=d[0],f=d[1];return(0,i.jsx)(S,{className:b,src:e,alt:null==c?void 0:c.name,pending:!e&&!f,onRenderLoading:function(){return(0,i.jsx)(aa.Z,{loading:!0,small:!0})},onRenderFallback:function(){return(0,i.jsx)(aa.Z,{extension:null==c?void 0:c.extension,small:!0})}})});function be(a){var b=a.stepObject,c=a.isMobile,d=a.onToggle,e=(0,a6.$G)().t,g=(0,o.Z)(),h=g.operation,l=g.goToBeginning;h.tool;var p=(0,B.Z)("lg"),q=(0,s.Z)(),r=q.surface,u=q.onSurface,v=q.onBackground,y=q.background,z=q.secondaryText,A=(0,n.Kj)(),D=A.selectedIds,E=A.setSelectedIds,F=A.files,G=(0,I.Z)().download,H=(0,m.useCallback)(function(){E([])},[E]),J=(0,m.useCallback)(function(a){"Escape"===a.key&&E([])},[E]);(0,m.useEffect)(function(){return window.addEventListener("keydown",J),function(){window.removeEventListener("keydown",J)}},[]);var K=function(a,e){a.stopPropagation();var g=b.enableDownload&&(!!a.ctrlKey||!!a.metaKey),h=b.enableDownload&&!!a.shiftKey,i=function(){var a=D.indexOf(e);if(!g&&h&&D.length){var b=F.findIndex(function(a){return a.id===D[D.length-1]}),c=F.findIndex(function(a){return a.id===e}),d=[];return(c<b?F.slice(c,b+1):F.slice(b,c+1).reverse()).map(function(a){return a.id})}return -1===a?g?(0,f.Z)(D).concat([e]):[e]:-1!==a?g?(0,f.Z)(D.slice(0,a)).concat((0,f.Z)(D.slice(a+1))):D.length>1?[e]:[]:D}();E(i),c&&d&&d()},L=function(a){var b=a.result;return 0===b.filePDFAVersion?(0,i.jsx)(j.xv,{fontSize:"sm",children:e("pdfa.not_pdfa_short")}):b.validated?b.errorMessages.length>0?(0,i.jsx)(j.xv,{fontSize:"sm",children:p?e("pdfa.verification_failed"):e("pdfa.verification_failed_short")}):(0,i.jsx)(j.xv,{fontSize:"sm",children:p?e("pdfa.verification_succeeded"):e("pdfa.verification_succeeded_short")}):(0,i.jsx)(j.xv,{fontSize:"sm",children:e("pdfa.convert_verification")})};return(0,i.jsx)(C.Z,{bottomComponent:(0,i.jsxs)(j.xu,{w:"full",flexShrink:0,pt:2,children:[(0,i.jsx)(j.xv,{color:z,w:"full",textAlign:"center",mb:2,children:e("pdfa.drop_files")}),(0,i.jsx)(x,{bg:y,borderTopWidth:1,w:"full",variant:"ghost",colorScheme:"gray",leftIcon:(0,i.jsx)(k.JO,{as:t.y7}),onClick:function(){l()},place:"bottom",children:e("pdfa.add_files")})]}),children:(0,i.jsx)(j.xu,{bg:r,position:"relative",h:"full",p:"1.5rem",pr:"1rem",overflowY:"auto",onClick:function(){return H()},userSelect:"none",children:(0,i.jsx)(i.Fragment,{children:F.map(function(a,c){return(0,i.jsxs)(j.xu,{transition:"border-color 0.2s",cursor:"pointer",onClick:function(b){return K(b,a.id)},d:"flex",alignItems:"center",mb:2,h:"3rem",w:"full",borderRadius:6,borderWidth:1,borderColor:D.includes(a.id)?"blue.500":u,bg:y,overflow:"hidden",children:[(0,i.jsx)(j.xu,{w:"2rem",h:"2rem",p:1,ml:{base:"1rem",lg:"2rem"},minW:"2rem",bg:v,d:"flex",justifyContent:"center",alignItems:"center",borderRadius:4,children:(0,i.jsx)(bd,{file:a})}),(0,i.jsx)(j.xu,{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",alignItems:"center",py:1,pl:"0.5rem",flex:"1 1 auto",fontSize:"sm",children:a.name}),(0,i.jsxs)(j.xu,{d:"flex",justifyContent:"flex-end",alignItems:"center",h:"full",py:2,pl:4,children:[(0,i.jsx)(j.xu,{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",children:(0,i.jsx)(L,{result:a.pdfaAnalysisResult})}),b.enableDownload?(0,i.jsx)(w.hU,{onClick:function(b){b.stopPropagation(),G(h,[a])},variant:"ghost",icon:(0,i.jsx)(k.JO,{as:t._8,color:"gray.600",boxSize:6}),size:"lg",ml:2,borderLeftWidth:1,borderLeftRadius:0,"aria-label":e("download")}):(0,i.jsx)(j.M5,{w:12,borderLeftWidth:1,ml:2,h:"full",children:0===a.pdfaAnalysisResult.filePDFAVersion?(0,i.jsx)(k.JO,{as:t.Fm,fill:z,h:6,w:6}):a.pdfaAnalysisResult.errorMessages.length>0?(0,i.jsx)(k.JO,{as:t.sz,fill:z,h:6,w:6}):(0,i.jsx)(k.JO,{as:t.KM,fill:z,w:6,h:6})})]})]},"pdfaa-tab-header-".concat(c))})})})})}}}])
//# sourceMappingURL=2710.b9f59f049aa85400.js.map